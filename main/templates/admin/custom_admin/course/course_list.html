{% extends 'base.html' %}
{% block title %}Course List{% endblock %}

{% block content %}
<!-- alertify -->
<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/alertify.min.js"></script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/css/alertify.min.css"/>

<div class="container py-5">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold">Your Courses</h3>
    </div>

    <div class="row g-4">
        {% for course in courses %}
        <div class="col-md-4">
            <div class="card h-100 shadow-sm border-0 rounded-4 course-card">
                
                <img src="{{ course.image.url }}" class="card-img-top rounded-top-4" style="height:200px; object-fit:contain; width: 100%;">

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold">{{ course.title }}</h5>
                    <p class="text-muted mb-2">{{ course.category.title }}</p>
                    
                    <p class="mb-3">
                        <span class="text-muted"><s>Rs {{ course.original_price }}</s></span><br>
                        <span class="text-success fw-semibold">Discount: {{ course.discount_percent }}%</span><br>
                        <span class="fw-bold text-danger">Final: Rs {{ course.final_price }}</span>
                    </p>

                    <a href="{% url 'main:edit_course' course.id %}" class="btn btn-success mt-auto w-100">
                        Edit Course
                    </a>
                </div>

            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info text-center">
                No courses added yet.
            </div>
        </div>
        {% endfor %}
    </div>
</div>

{% if messages %}
    {% for message in messages %}
    <script>
        alertify.set('notifier','position', 'top-right');
        alertify.success("{{ message }}");
    </script>
    {% endfor %}
{% endif %}

<style>
    .course-card:hover {
        transform: translateY(-5px);
        transition: all 0.3s ease;
        box-shadow: 0 0.75rem 1.5rem rgba(0,0,0,0.15);
    }

    .card-title {
        font-size: 1.15rem;
    }

    p {
        font-size: 0.95rem;
    }
</style>

{% endblock %}
