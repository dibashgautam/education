{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Institute{% endblock %}

{% block content %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'css/admin/edit_institute.css' %}">

<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/alertify.min.js"></script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/css/alertify.min.css"/>

<div class="apply-card mt-5">

  <!-- HERO -->
  <div class="hero">
      {% if institute.background_image %}
        <img id="bgPreview" src="{{ institute.background_image.url }}" class="bg-img">
      {% else %}
        <img id="bgPreview" src="{% static 'images/bg.png' %}" class="bg-img">
      {% endif %}

      <label for="id_background_image" class="bg-camera">
        <i class="fas fa-camera"></i>
      </label>
      <input type="file" id="id_background_image" name="background_image" hidden>
  

    <!-- LOGO -->
    <div class="logo-circle">
      <div class="logo-inner" id="logoPreview">
        {% if institute.profile_logo %}
          <img src="{{ institute.profile_logo.url }}">
        {% else %}
          <i class="fas fa-university"></i>
        {% endif %}
      </div>

      <label for="id_logo_image" class="logo-camera">
        <i class="fas fa-camera"></i>
      </label>
      <input type="file" id="id_logo_image" name="profile_logo" hidden>
    </div>
   </div>

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- FORM GRID -->
    <div class="form-grid">

      <!-- LEFT -->
      <div>
        <div class="mb-3">
          <label class="form-label">Institute Name</label>
          <input type="text" name="name" class="form-control" value="{{ institute.name }}" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Established Year</label>
          <input type="text" name="estd" class="form-control" value="{{ institute.estd }}">
        </div>

        <div class="mb-3">
          <label class="form-label">Email</label>
          <input type="email" name="email" class="form-control" value="{{ institute.email }}" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Phone</label>
          <input type="text" name="phone" class="form-control" value="{{ institute.phone }}" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea name="description" rows="4" class="form-control">{{ institute.description }}</textarea>
        </div>
      </div>

      <!-- RIGHT -->
      <div>
        <div class="mb-3">
          <label class="form-label">Website</label>
          <input type="url" name="website" class="form-control" value="{{ institute.website }}">
        </div>

        <div class="mb-3">
          <label class="form-label">Address</label>
          <input type="text" name="address" class="form-control" value="{{ institute.address }}" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Registration Number</label>
          <input type="text" name="register_number" class="form-control" value="{{ institute.register_number }}">
        </div>

        <!-- SIGNATURE -->
        <div class="mb-3">
          <label class="form-label">Signature</label>
          <input type="file" name="signature" class="form-control">
          {% if institute.signature %}
            {% if ".pdf" in institute.signature.url|lower %}
              <a href="{{ institute.signature.url }}" target="_blank" class="text-white">View PDF</a>
            {% else %}
              <img src="{{ institute.signature.url }}" class="img-preview">
            {% endif %}
          {% endif %}
        </div>

        <!-- STAMP -->
        <div class="mb-3">
          <label class="form-label">Stamp</label>
          <input type="file" name="stamp" class="form-control">
          {% if institute.stamp %}
            {% if ".pdf" in institute.stamp.url|lower %}
              <a href="{{ institute.stamp.url }}" target="_blank" class="text-white">View PDF</a>
            {% else %}
              <img src="{{ institute.stamp.url }}" class="img-preview">
            {% endif %}
          {% endif %}
        </div>
      </div>

    </div>

    <button class="btn btn-danger btn-lg w-100 mt-4">ðŸš€ Save Changes</button>
  </form>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="{% static 'js/admin/edit_institute.js' %}"></script>

{% if messages %}
  {% for message in messages %}
    <script>
      alertify.set('notifier','position','top-right');
      alertify.success("{{ message }}");
    </script>
  {% endfor %}
{% endif %}

{% endblock %}
