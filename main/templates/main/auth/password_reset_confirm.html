{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container-fluid" style="background-color: #f5f7fb; min-height: 80vh; display: flex; justify-content: center; align-items: center; padding: 40px 0;">
    <div class="row justify-content-center w-100">
        <div class="col-md-5">

            {% if validlink %}
            <div class="auth-card" 
                 style="
                    width: 100%;
                    max-width: 420px;
                    padding: 30px;
                    background: #fff;
                    border-radius: 12px;
                    box-shadow: 0px 8px 20px rgba(0,0,0,0.1);
                    margin: 20px auto;">
                
                <h2 style="font-weight: 700; text-align: center; color: #6b0a0a; margin-bottom: 25px; font-size: 26px;">
                    Set New Password
                </h2>
                
                <form method="post">
                    {% csrf_token %}

                    <div style="margin-bottom: 1rem;">
                        <label for="{{ form.new_password1.id_for_label }}" style="font-weight: 500; color: #444; display: block; margin-bottom: 5px;">
                            {{ form.new_password1.label }}
                        </label>
                        {{ form.new_password1 }} 
                        <span style="display: block; color: #dc3545; font-size: 14px; margin-top: 5px;">{{ form.new_password1.errors }}</span>
                        <script>
                            document.getElementById("{{ form.new_password1.id_for_label }}").setAttribute("style", "width: 100%; padding: 12px 14px; margin-top: 5px; margin-bottom: 5px; border-radius: 8px; border: 1px solid #ddd; outline: none; font-size: 15px; box-sizing: border-box;");
                        </script>
                        <div style="color: #6c757d; font-size: 13px; margin-top: 5px;">{{ form.new_password1.help_text|safe }}</div>
                    </div>

                    <div style="margin-bottom: 1rem;">
                        <label for="{{ form.new_password2.id_for_label }}" style="font-weight: 500; color: #444; display: block; margin-bottom: 5px;">
                            {{ form.new_password2.label }}
                        </label>
                        {{ form.new_password2 }}
                        <span style="display: block; color: #dc3545; font-size: 14px; margin-top: 5px;">{{ form.new_password2.errors }}</span>
                        <script>
                            document.getElementById("{{ form.new_password2.id_for_label }}").setAttribute("style", "width: 100%; padding: 12px 14px; margin-top: 5px; margin-bottom: 5px; border-radius: 8px; border: 1px solid #ddd; outline: none; font-size: 15px; box-sizing: border-box;");
                        </script>
                        <div style="color: #6c757d; font-size: 13px; margin-top: 5px;">{{ form.new_password2.help_text|safe }}</div>
                    </div>
                    
                    <div style="color: #dc3545; font-size: 14px;">{{ form.non_field_errors }}</div>

                    <button type="submit"
                            style="width: 100%; padding: 14px; background: #6b0a0a; border: none; color: #fff; border-radius: 8px; font-size: 17px; font-weight: 600; cursor: pointer; margin-top: 10px;">
                        Reset Password
                    </button>
                </form>

            </div>
            {% else %}
            <div class="alert alert-danger" style="padding: 15px; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; border-radius: 5px; text-align: center;">
                The password reset link was invalid, possibly because it has already been used. Please request a new password reset.
            </div>
            {% endif %}

        </div>
    </div>
</div>

{% endblock content %}